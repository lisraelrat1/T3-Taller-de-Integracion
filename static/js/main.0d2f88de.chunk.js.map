{"version":3,"sources":["context/socket.js","ChatRoom/useChat.js","ChatRoom/ChatRoom.jsx","Flights/getFlights.js","Flights/Flights.jsx","Map/useMap.js","dot.svg","Map/Map.jsx","App.js","reportWebVitals.js","index.js"],"names":["socket","socketio","connect","path","SocketContext","React","createContext","io","require","NEW_CHAT_MESSAGE_EVENT","useChat","username","useState","messages","setMessages","socketRef","useRef","useEffect","current","on","message","incomingMessage","ownedByCurrentUser","name","disconnect","sendMessage","messageBody","emit","ChatRoom","props","mode","ui","updateUI","title","updateProject","newMessage","setNewMessage","updateTitle","titleRef","select","className","map","i","Date","date","toLocaleString","fontSize","onClick","Button","variant","color","type","onSubmit","e","preventDefault","p","ref","placeholder","value","onChange","target","event","FLIGHTS","GetFlights","flights","setFlights","vuelos","requestFlights","Flights","console","log","style","height","margin","backgroundColor","item","index","Card","width","maxHeight","overflow","CardContent","Typography","component","code","airline","plane","seats","origin","destination","passengers","item1","number","id","age","useMap","positions","setPositions","coords","incomingPosition","Mapa","polyline","forEach","element","push","position","MapContainer","center","zoom","scrollWheelZoom","TileLayer","attribution","url","Polyline","pathOptions","Marker","icon","Icon","iconUrl","markerIconPng","iconSize","iconAnchor","App","Provider","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0d2f88de.chunk.js","sourcesContent":["import React from \"react\";\nimport socketio from \"socket.io-client\";\n\nexport const socket = socketio.connect(\"wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl\", {\n    path: \"/flights\"\n  });\nexport const SocketContext = React.createContext();","import { useEffect, useRef, useState} from \"react\";\nconst io = require(\"socket.io-client\");\n\nconst NEW_CHAT_MESSAGE_EVENT = \"CHAT\";\n\nconst useChat = (username) => {\n    const [messages, setMessages] = useState([]);\n    const socketRef = useRef();\n\n    useEffect(() => {\n      socketRef.current = io(\"wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl\", {\n        path: \"/flights\"\n      });\n  \n      socketRef.current.on(NEW_CHAT_MESSAGE_EVENT, (message) => {\n        \n        const incomingMessage = {\n          ...message,\n          ownedByCurrentUser: message.name === username //message.senderId === socketRef.current.id \n        };\n        setMessages((messages) => [...messages, incomingMessage]);\n      });\n  \n      return () => {\n        socketRef.current.disconnect();\n      };\n    }, [username]);\n\n    const sendMessage = (messageBody) => {\n      socketRef.current.emit(NEW_CHAT_MESSAGE_EVENT, {\n        'name': username,\n        'message': messageBody,\n      });\n    };\n\n    return { messages, sendMessage };\n};\n\nexport default useChat;","import React from \"react\";\n\nimport \"./ChatRoom.css\";\nimport useChat from \"./useChat\";\n\nimport AccountBoxIcon from '@material-ui/icons/AccountBox';\nimport Button from '@material-ui/core/Button';\n\nconst ChatRoom = (props) => {\n  const [ui, updateUI] = React.useState({ mode: \"read\" });\n  const [username, updateProject] = React.useState({\n    title: \"Click here to edit username\"\n  });\n\n  const { messages, sendMessage} = useChat(username.title); // Creates a websocket and manages messaging\n  const [newMessage, setNewMessage] = React.useState(\"\"); // Message to be sent\n\n  const handleNewMessageChange = (event) => {\n    setNewMessage(event.target.value);\n  };\n\n  const handleSendMessage = () => {\n    sendMessage(newMessage);\n    setNewMessage(\"\");\n  };\n\n  // This is the form\n  const [title, updateTitle] = React.useState(username.title);\n\n  const onSubmit = (e) => {\n    e.preventDefault();\n    // Update page data, update ui state, clear form errors\n    updateProject((p) => ({ ...p, title }));\n    updateUI({ mode: \"read\" });\n  };\n\n  // Select the title text when you enter edit mode\n  // This can't just be in a local function because that dom ref isn't rendered\n  const titleRef = React.useRef();\n  React.useEffect(\n    () => {\n      // Only run when you are entering edit mode\n      if (ui.mode === \"edit\") {\n        titleRef.current.select();\n      }\n    },\n    [ui.mode] // Run when this changes\n  );\n\n  return (\n    <div className=\"chat-room-container\">\n      <div className=\"messages-container\">\n        <ol className=\"messages-list\">\n          {messages.map((message, i) => (\n            <li\n              key={i}\n              className={`message-item ${\n                message.ownedByCurrentUser ? \"my-message\" : \"received-message\"\n              }`}\n            >\n              {message.name + ': '}\n              <div className=\"date\">{(new Date(message.date)).toLocaleString()}</div>\n              <br></br>\n              { message.message}\n            </li>\n          ))}\n        </ol>\n      </div>\n      <div className=\"new-message-input-username\">\n      {ui.mode === \"read\" && (\n        <>\n          <div className=\"username\">\n            <AccountBoxIcon fontSize=\"large\"></AccountBoxIcon>\n            <h1\n              onClick={() => updateUI({ mode: \"edit\" })}\n              className = \"title\"\n            >\n              {username.title}\n            </h1>\n            <div className=\"editbutton\">\n            <Button \n              variant=\"contained\" \n              color=\"default\"\n              type=\"button\"\n              onClick={() => updateUI({ mode: \"edit\" })}\n              \n            >\n              edit\n            </Button>\n            </div>\n            \n          </div>\n        </>\n      )}\n\n      {ui.mode === \"edit\" && (\n        <>\n          <form className=\"\" onSubmit={onSubmit}>\n            <input\n              ref={titleRef}\n              // className={`flex-1 border-b border-grey-light focus:border-green focus:bg-grey-lightest`}\n              type=\"text\"\n              placeholder=\"Title goes here\"\n              value={title}\n              onChange={(e) => updateTitle(e.target.value)}\n            />\n            <Button type=\"submit\" variant=\"contained\" \n              color=\"default\"\n              className=\"alignright\">\n              save\n            </Button>\n          </form>\n        </>\n        )}\n      </div>\n\n      <textarea\n        value={newMessage}\n        onChange={handleNewMessageChange}\n        placeholder=\"Write message...\"\n        className=\"new-message-input-field\"\n      />\n      <button onClick={handleSendMessage} className=\"send-message-button\">\n        Send\n      </button>\n    </div>\n  );\n};\n\nexport default ChatRoom;","import { useEffect, useRef, useState } from \"react\";\nconst io = require(\"socket.io-client\");\n\nconst FLIGHTS= \"FLIGHTS\";\n\nconst GetFlights = () => {\n    const [flights, setFlights] = useState([]);\n    const socketRef = useRef();\n\n    socketRef.current = io(\"wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl\", {\n        path: \"/flights\"\n      });\n\n    useEffect(() => {\n\n      socketRef.current.on(FLIGHTS, (vuelos) => {\n        setFlights(vuelos);\n      });\n  \n      return () => {\n        socketRef.current.disconnect();\n      };\n    }, []);\n\n    const requestFlights = () => {\n      socketRef.current.emit(FLIGHTS, {});\n    };\n    \n  \n    return {flights, requestFlights};\n};\n\nexport default GetFlights;","import React from \"react\";\n\nimport \"./Flights.css\";\nimport GetFlights from \"./getFlights\";\n\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Button from \"@material-ui/core/Button\";\n\n\nconst Flights = (props) => {\n  const {flights, requestFlights} = GetFlights(); \n\n  const bringFlights = () => {\n    requestFlights();\n    console.log(flights)\n  };\n\n  return (\n    <div className=\"flights-container\">\n      <Button onClick={bringFlights} style={{height: '25%', margin: 'auto 5px ', backgroundColor: ' rgb(0, 132, 255)'}}>\n        Traer Vuelos\n      </Button>\n        {flights.map(function(item,index){\n          return (\n       <Card\n        style={{\n          width: 300,\n          height: \"90%\",\n          margin: 10,\n          backgroundColor: \"#eeeeee\",\n          maxHeight: 200, \n          overflow: 'auto'\n        }}\n      >\n        <CardContent>\n          <Typography variant=\"h5\" component=\"h2\">\n            Vuelo {item.code}\n          </Typography>\n          <Typography\n            color=\"textSecondary\"\n          >\n            {item.airline}\n          </Typography>\n\n          <Typography>\n            <p>{item.plane} - NÂ° of seats: {item.seats}</p>\n            <p> Origin: {item.origin[0]},{item.origin[1]}</p>\n            <p> Destination: {item.destination[0]},{item.destination[1]}</p>\n            <p>Passagers: </p>\n            \n            {item.passengers.map(function(item1,number){\n              return (\n                  <p id={number} className='info'> \n                  {item1.name} - {item1.age} \n                  </p>\n        \n                 );\n              })}\n          </Typography>\n        </CardContent>\n      </Card>\n        )})}\n    </div>\n  );\n};\n\nexport default Flights;\n\n","import { useEffect, useRef, useState } from \"react\";\nconst io = require(\"socket.io-client\");\n\nconst POSITION= \"POSITION\";\n\nconst useMap = () => {\n    const [positions, setPositions] = useState([]);\n    const socketRef = useRef();\n    \n    useEffect(() => {\n      socketRef.current = io(\"wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl\", {\n        path: \"/flights\"\n      });\n  \n      socketRef.current.on(POSITION, (coords) => {\n        const incomingPosition = {\n          ...coords,\n        }\n        setPositions((positions) => [...positions, incomingPosition]);\n      });\n  \n      return () => {\n        socketRef.current.disconnect();\n      };\n    }, []);\n\n    return {positions};\n};\n\nexport default useMap;","export default __webpack_public_path__ + \"static/media/dot.c999a556.svg\";","import React from \"react\";\n\nimport \"./Map.css\";\nimport GetFlights from \"../Flights/getFlights\";\nimport useMap from \"./useMap\"\n\n// import Airplane from '@material-ui/icons/AirplanemodeActive';\nimport {MapContainer, TileLayer, Marker, Popup, Polyline } from 'react-leaflet'\nimport \"leaflet/dist/leaflet.css\"\n\nimport markerIconPng from \"leaflet/dist/images/marker-icon.png\"\nimport dotIcon from '../dot.svg'\nimport {Icon} from 'leaflet'\n\n\nconst Mapa = (props) => {\n  const {flights, requestFlights} = GetFlights(); \n  const {positions} = useMap()\n\n  requestFlights()\n\n  const polyline = []\n  flights.forEach(element => {\n    polyline.push([element.origin, element.destination])\n  })\n\n  const coords = []\n  positions.forEach(position => {\n    coords.push(position.position)\n  })\n\n\n  return (\n    <div className=\"map-container\">\n      {requestFlights}\n      <MapContainer center={[-22.05, -60.99]} zoom={3} scrollWheelZoom={false} style={{height:450}}>\n        <TileLayer\n          attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        />\n\n        {polyline.map(element =>\n        <div>\n          <Polyline pathOptions={{ color: 'black' }} positions={element} />\n          \n          <Marker position={element[0]} icon={new Icon({iconUrl: markerIconPng, iconSize: [25, 41], iconAnchor: [12, 41]})} />\n          <Marker position={element[1]} icon={new Icon({iconUrl: markerIconPng, iconSize: [25, 41], iconAnchor: [12, 41]})} />\n        </div>\n        )}\n\n        {/* {positions.map(position =>\n          <Marker position={[position.position[0],position.position[1]]} icon={new Icon({iconUrl: dotIcon, iconSize: [25, 25]})}>\n              {position.code && <Popup>\n                  <span>{position.code}</span>\n              </Popup>}\n          </Marker>\n        )} */}\n      </MapContainer>\n      \n    </div>\n  );\n};\n\nexport default Mapa;","import React from \"react\";\n\nimport \"./index.css\";\n\nimport {SocketContext, socket} from './context/socket';\n\nimport ChatRoom from \"./ChatRoom/ChatRoom\";\nimport Flights from \"./Flights/Flights\"\nimport Map from \"./Map/Map\"\n\nfunction App() {\n  return (\n    <SocketContext.Provider value={socket}>\n      <ChatRoom />\n      <Flights />\n      <Map />\n    </SocketContext.Provider>\n  );\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}