(this["webpackJsonpsocket.io-react-hooks-chat"]=this["webpackJsonpsocket.io-react-hooks-chat"]||[]).push([[0],{104:function(e,t,n){},114:function(e,t,n){},115:function(e,t,n){},118:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),i=n(20),a=n.n(i),r=(n(48),n(29)),o=n.n(r).a.connect("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights"}),l=s.a.createContext(),u=n(5),j=n(8),d=(n(104),n(41)),h=n(29),b="CHAT",f=function(e){var t=Object(c.useState)([]),n=Object(j.a)(t,2),s=n[0],i=n[1],a=Object(c.useRef)();Object(c.useEffect)((function(){return a.current=h("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights"}),a.current.on(b,(function(t){var n=Object(u.a)(Object(u.a)({},t),{},{ownedByCurrentUser:t.name===e});i((function(e){return[].concat(Object(d.a)(e),[n])}))})),function(){a.current.disconnect()}}),[e]);return{messages:s,sendMessage:function(t){a.current.emit(b,{name:e,message:t})}}},O=n(64),m=n.n(O),g=n(143),p=n(2),x=function(e){var t=s.a.useState({mode:"read"}),n=Object(j.a)(t,2),c=n[0],i=n[1],a=s.a.useState({title:"Click here to edit username"}),r=Object(j.a)(a,2),o=r[0],l=r[1],d=f(o.title),h=d.messages,b=d.sendMessage,O=s.a.useState(""),x=Object(j.a)(O,2),v=x[0],S=x[1],w=s.a.useState(o.title),k=Object(j.a)(w,2),N=k[0],C=k[1],y=s.a.useRef();return s.a.useEffect((function(){"edit"===c.mode&&y.current.select()}),[c.mode]),Object(p.jsxs)("div",{className:"chat-room-container",children:[Object(p.jsx)("div",{className:"messages-container",children:Object(p.jsx)("ol",{className:"messages-list",children:h.map((function(e,t){return Object(p.jsxs)("li",{className:"message-item ".concat(e.ownedByCurrentUser?"my-message":"received-message"),children:[e.name+": ",Object(p.jsx)("div",{className:"date",children:new Date(e.date).toLocaleString()}),Object(p.jsx)("br",{}),e.message]},t)}))})}),Object(p.jsxs)("div",{className:"new-message-input-username",children:["read"===c.mode&&Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:"username",children:[Object(p.jsx)(m.a,{fontSize:"large"}),Object(p.jsx)("h1",{onClick:function(){return i({mode:"edit"})},className:"title",children:o.title}),Object(p.jsx)("div",{className:"editbutton",children:Object(p.jsx)(g.a,{variant:"contained",color:"default",type:"button",onClick:function(){return i({mode:"edit"})},children:"edit"})})]})}),"edit"===c.mode&&Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("form",{className:"",onSubmit:function(e){e.preventDefault(),l((function(e){return Object(u.a)(Object(u.a)({},e),{},{title:N})})),i({mode:"read"})},children:[Object(p.jsx)("input",{ref:y,type:"text",placeholder:"Title goes here",value:N,onChange:function(e){return C(e.target.value)}}),Object(p.jsx)(g.a,{type:"submit",variant:"contained",color:"default",className:"alignright",children:"save"})]})})]}),Object(p.jsx)("textarea",{value:v,onChange:function(e){S(e.target.value)},placeholder:"Write message...",className:"new-message-input-field"}),Object(p.jsx)("button",{onClick:function(){b(v),S("")},className:"send-message-button",children:"Send"})]})},v=(n(114),n(29)),S="FLIGHTS",w=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],s=t[1],i=Object(c.useRef)();i.current=v("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights"}),Object(c.useEffect)((function(){return i.current.on(S,(function(e){s(e)})),function(){i.current.disconnect()}}),[]);return{flights:n,requestFlights:function(){i.current.emit(S,{})}}},k=n(144),N=n(137),C=n(138),y=function(e){var t=w(),n=t.flights,c=t.requestFlights;return Object(p.jsxs)("div",{className:"flights-container",children:[Object(p.jsx)(g.a,{onClick:function(){c(),console.log(n)},style:{height:"25%",margin:"auto 5px ",backgroundColor:" rgb(0, 132, 255)"},children:"Traer Vuelos"}),n.map((function(e,t){return Object(p.jsx)(k.a,{style:{width:300,height:180,margin:10,backgroundColor:"#eeeeee",maxHeight:200,overflow:"auto"},children:Object(p.jsxs)(N.a,{children:[Object(p.jsxs)(C.a,{variant:"h5",component:"h2",children:["Vuelo ",e.code]}),Object(p.jsx)(C.a,{color:"textSecondary",children:e.airline}),Object(p.jsxs)(C.a,{children:[Object(p.jsxs)("p",{children:[e.plane," - N\xb0 of seats: ",e.seats]}),Object(p.jsxs)("p",{children:[" Origin: ",e.origin[0],",",e.origin[1]]}),Object(p.jsxs)("p",{children:[" Destination: ",e.destination[0],",",e.destination[1]]}),Object(p.jsx)("p",{children:"Passagers: "}),e.passengers.map((function(e,t){return Object(p.jsxs)("p",{id:t,className:"info",children:[e.name," - ",e.age]})}))]})]})})}))]})},F=(n(115),n(29)),I=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],s=t[1],i=Object(c.useRef)();return Object(c.useEffect)((function(){return i.current=F("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights"}),i.current.on("POSITION",(function(e){var t=Object(u.a)({},e);s((function(e){return[].concat(Object(d.a)(e),[t])}))})),function(){i.current.disconnect()}}),[]),{positions:n}},z=n(139),E=n(145),T=n(140),U=n(141),A=n(142),P=(n(116),n(46)),R=n.p+"static/media/dot.0f95986e.svg",B=n.p+"static/media/plane.3a248645.svg",D=n(7),L=n.n(D),M=function(e){var t=w(),n=t.flights,c=t.requestFlights,s=I().positions;c();var i=[];n.forEach((function(e){i.push([e.origin,e.destination])}));var a=[];s.forEach((function(e){a.push(e.position)}));L.a.icon({iconUrl:B,iconRetinaUrl:B,iconAnchor:[5,55],popupAnchor:[10,-44],iconSize:[25,55]});return Object(p.jsxs)("div",{className:"map-container",children:[c,Object(p.jsxs)(z.a,{center:[-22.05,-60.99],zoom:3,scrollWheelZoom:!1,style:{height:480},children:[Object(p.jsx)(E.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),i.map((function(e){return Object(p.jsxs)("div",{children:[Object(p.jsx)(T.a,{pathOptions:{color:"black"},positions:e}),Object(p.jsx)(U.a,{position:e[0],icon:new D.Icon({iconUrl:P.a,iconSize:[25,41],iconAnchor:[12,41]})}),Object(p.jsx)(U.a,{position:e[1],icon:new D.Icon({iconUrl:P.a,iconSize:[25,41],iconAnchor:[12,41]})})]})})),s.map((function(e){return Object(p.jsx)(U.a,{position:[e.position[0],e.position[1]],icon:new D.Icon({iconUrl:R,iconSize:[15,15]}),children:e.code&&Object(p.jsx)(A.a,{children:Object(p.jsx)("span",{children:e.code})})})}))]})]})};var q=function(){return Object(p.jsxs)(l.Provider,{value:o,children:[Object(p.jsx)(x,{}),Object(p.jsx)(y,{}),Object(p.jsx)(M,{})]})},H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,146)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),c(e),s(e),i(e),a(e)}))};a.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(q,{})}),document.getElementById("root")),H()},48:function(e,t,n){}},[[118,1,2]]]);
//# sourceMappingURL=main.2e887516.chunk.js.map