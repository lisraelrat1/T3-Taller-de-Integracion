(this["webpackJsonpsocket.io-react-hooks-chat"]=this["webpackJsonpsocket.io-react-hooks-chat"]||[]).push([[0],{104:function(e,t,n){},114:function(e,t,n){},115:function(e,t,n){},118:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),a=n(19),r=n.n(a),i=(n(47),n(29)),o=n.n(i).a.connect("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights"}),l=s.a.createContext(),u=n(5),j=n(7),d=(n(104),n(40)),h=n(29),b="CHAT",f=function(e){var t=Object(c.useState)([]),n=Object(j.a)(t,2),s=n[0],a=n[1],r=Object(c.useRef)();Object(c.useEffect)((function(){return r.current=h("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights"}),r.current.on(b,(function(t){var n=Object(u.a)(Object(u.a)({},t),{},{ownedByCurrentUser:t.name===e});a((function(e){return[].concat(Object(d.a)(e),[n])}))})),function(){r.current.disconnect()}}),[e]);return{messages:s,sendMessage:function(t){r.current.emit(b,{name:e,message:t})}}},O=n(63),m=n.n(O),g=n(143),p=n(2),x=function(e){var t=s.a.useState({mode:"read"}),n=Object(j.a)(t,2),c=n[0],a=n[1],r=s.a.useState({title:"Click here to edit username"}),i=Object(j.a)(r,2),o=i[0],l=i[1],d=f(o.title),h=d.messages,b=d.sendMessage,O=s.a.useState(""),x=Object(j.a)(O,2),v=x[0],w=x[1],S=s.a.useState(o.title),k=Object(j.a)(S,2),N=k[0],C=k[1],y=s.a.useRef();return s.a.useEffect((function(){"edit"===c.mode&&y.current.select()}),[c.mode]),Object(p.jsxs)("div",{className:"chat-room-container",children:[Object(p.jsx)("div",{className:"messages-container",children:Object(p.jsx)("ol",{className:"messages-list",children:h.map((function(e,t){return Object(p.jsxs)("li",{className:"message-item ".concat(e.ownedByCurrentUser?"my-message":"received-message"),children:[e.name+": ",Object(p.jsx)("div",{className:"date",children:new Date(e.date).toLocaleString()}),Object(p.jsx)("br",{}),e.message]},t)}))})}),Object(p.jsxs)("div",{className:"new-message-input-username",children:["read"===c.mode&&Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:"username",children:[Object(p.jsx)(m.a,{fontSize:"large"}),Object(p.jsx)("h1",{onClick:function(){return a({mode:"edit"})},className:"title",children:o.title}),Object(p.jsx)("div",{className:"editbutton",children:Object(p.jsx)(g.a,{variant:"contained",color:"default",type:"button",onClick:function(){return a({mode:"edit"})},children:"edit"})})]})}),"edit"===c.mode&&Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("form",{className:"",onSubmit:function(e){e.preventDefault(),l((function(e){return Object(u.a)(Object(u.a)({},e),{},{title:N})})),a({mode:"read"})},children:[Object(p.jsx)("input",{ref:y,type:"text",placeholder:"Title goes here",value:N,onChange:function(e){return C(e.target.value)}}),Object(p.jsx)(g.a,{type:"submit",variant:"contained",color:"default",className:"alignright",children:"save"})]})})]}),Object(p.jsx)("textarea",{value:v,onChange:function(e){w(e.target.value)},placeholder:"Write message...",className:"new-message-input-field"}),Object(p.jsx)("button",{onClick:function(){b(v),w("")},className:"send-message-button",children:"Send"})]})},v=(n(114),n(29)),w="FLIGHTS",S=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],s=t[1],a=Object(c.useRef)();a.current=v("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights"}),Object(c.useEffect)((function(){return a.current.on(w,(function(e){s(e)})),function(){a.current.disconnect()}}),[]);return{flights:n,requestFlights:function(){a.current.emit(w)}}},k=n(144),N=n(138),C=n(139),y=function(e){var t=S(),n=t.flights,c=t.requestFlights;return Object(p.jsxs)("div",{className:"flights-container",children:[Object(p.jsx)(g.a,{onClick:(c(),void console.log(n)),style:{height:"25%",margin:"auto 5px ",backgroundColor:" rgb(0, 132, 255)"},children:"Traer Vuelos"}),n.map((function(e,t){return Object(p.jsx)(k.a,{style:{width:300,height:180,margin:10,backgroundColor:"#eeeeee",maxHeight:200,overflow:"auto"},children:Object(p.jsxs)(N.a,{children:[Object(p.jsxs)(C.a,{variant:"h5",component:"h2",children:["Vuelo ",e.code]}),Object(p.jsx)(C.a,{color:"textSecondary",children:e.airline}),Object(p.jsxs)(C.a,{children:[Object(p.jsxs)("p",{children:[e.plane," - N\xb0 of seats: ",e.seats]}),Object(p.jsxs)("p",{children:[" Origin: ",e.origin[0],",",e.origin[1]]}),Object(p.jsxs)("p",{children:[" Destination: ",e.destination[0],",",e.destination[1]]}),Object(p.jsx)("p",{children:"Passagers: "}),e.passengers.map((function(e,t){return Object(p.jsxs)("p",{id:t,className:"info",children:[e.name," - ",e.age]})}))]})]})})}))]})},F=(n(115),n(29)),E=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],s=t[1],a=Object(c.useRef)();return Object(c.useEffect)((function(){return a.current=F("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights"}),a.current.on("POSITION",(function(e){var t=Object(u.a)({},e);s((function(e){return[].concat(Object(d.a)(e),[t])}))})),function(){a.current.disconnect()}}),[]),{positions:n}},I=n(140),T=n(145),z=n(141),M=n(142),P=(n(116),n(46)),B=n(11),D=function(e){var t=S(),n=t.flights,c=(t.requestFlights,E().positions),s=[{fillColor:"blue"},{color:"black"},{color:"lime"},{color:"purple"},{color:"red"}],a=[];n.forEach((function(e){a.push([e.origin,e.destination])}));var r=[];return c.forEach((function(e){r.push(e.position)})),Object(p.jsx)("div",{className:"map-container",children:Object(p.jsxs)(I.a,{center:[.61,-2.28],zoom:2,scrollWheelZoom:!1,style:{height:480},children:[Object(p.jsx)(T.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),a.map((function(e){return Object(p.jsxs)("div",{children:[Object(p.jsx)(z.a,{pathOptions:s[s.length*Math.random()|0],positions:e}),Object(p.jsx)(M.a,{position:e[0],icon:new B.Icon({iconUrl:P.a,iconSize:[25,41],iconAnchor:[12,41]})}),Object(p.jsx)(M.a,{position:e[1],icon:new B.Icon({iconUrl:P.a,iconSize:[25,41],iconAnchor:[12,41]})})]})}))]})})};var L=function(){return Object(p.jsxs)(l.Provider,{value:o,children:[Object(p.jsx)(x,{}),Object(p.jsx)(y,{}),Object(p.jsx)(D,{})]})},R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,146)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),s(e),a(e),r(e)}))};r.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(L,{})}),document.getElementById("root")),R()},47:function(e,t,n){}},[[118,1,2]]]);
//# sourceMappingURL=main.bd4d1930.chunk.js.map